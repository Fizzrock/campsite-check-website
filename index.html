<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campsite Availability Checker</title>
    <link rel="icon" href="media/campground-solid-full.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1 class="main-title">
        <img src="media/campground-solid-full.svg" alt="">
        <span>Campsite</span><span>Availability</span><span>Checker</span>
        <img src="media/campground-solid-full.svg" alt="">
    </h1>

    <div id="facility-search-accordion-container">
        <h2 class="accordion-header">
            <span>Find Campground by Name</span>
            <span class="toggle-icon">▼</span>
        </h2>
        <div class="accordion-content">
            <div class="instructions" style="margin-top: 1em;">
                <p>Use this search to find a campground's ID. Once you select a result, the ID will be filled in below.</p>
            </div>
            <div id="facility-search-form">
                <label for="facility-query">Search Term:</label>
                <input type="text" id="facility-query" placeholder="e.g., Rock Creek">

                <label for="facility-state">State:</label>
                <select id="facility-state"></select>

                <button type="button" id="facility-search-btn">Find</button>
            </div>
            <div id="facility-search-status" class="request-info" style="display: none;"></div>
            <div id="facility-search-results"></div>
        </div>
    </div>

    <div id="config-accordion-container">
        <h2 class="accordion-header">
            <span>Check for Campsites</span>
            <span class="toggle-icon">▼</span>
        </h2>
        <div class="accordion-content">
            <div class="instructions" style="margin-top: 1em; padding-bottom: 1em;">
                <p><strong>How to use:</strong></p>
                <ol>
                    <li>Select a saved location from the <strong>Load Preset</strong> dropdown, or manually enter a <strong>Campground ID</strong>.</li>
                    <li>Adjust the date range and other options as needed.</li>
                    <li>Click <strong>Run Availability Check</strong> to see the results below.</li>
                </ol>
            </div>

            <form id="config-form">
                <!-- Main settings -->
                <fieldset>
                    <legend>Search Configuration</legend>
                    <div class="form-grid">
                        <label for="preset-selector">Load Preset:</label>
                        <select id="preset-selector" name="preset-selector"></select>
        
                        <label for="campgroundId">Campground ID:</label>
                        <div>
                            <input type="text" id="campgroundId" name="campgroundId" required placeholder="e.g.: 232448 | ▲ Use tool above">
                            <div id="campground-name-display" class="form-note" style="display: none; margin-top: 5px; font-weight: bold; color: #0056b3;"></div>
                        </div>

                        <label for="filterStartDate">Start Date:</label>
                        <input type="date" id="filterStartDate" name="filterStartDate">
        
                        <label for="filterEndDate">End Date:</label>
                        <input type="date" id="filterEndDate" name="filterEndDate">
        
                        <label for="siteNumbers">Site Numbers (comma-separated):</label>
                        <textarea id="siteNumbers" name="siteNumbers" rows="3" placeholder="e.g.: 12, A022, 105, C"></textarea>
                    </div>
                </fieldset>
        
                <!-- Output & Display Options -->
                <fieldset>
                    <legend>Output & Display Options</legend>
                    
                    <div class="checkbox-grid">
                        <!-- General Display -->
                        <label><input type="checkbox" id="sortBySiteFirst" name="sortBySiteFirst"> Sort by Site first (default is by Date)</label>
                        <label><input type="checkbox" name="showCampsiteIdColumn" id="showCampsiteIdColumn"> Show Campsite ID Column</label>
                        
                        <!-- Tab Content -->
                        <label><input type="checkbox" id="includeNotReservableInAvailableTab" name="includeNotReservableInAvailableTab"> Exclude 'Walk-up' sites</label>
                        <label><input type="checkbox" id="showAllFilteredSitesStatuses" name="showAllFilteredSitesStatuses"> Show All Reservation Statuses</label>
                        <label><input type="checkbox" id="fetchDetailsForAvailableOnly" name="fetchDetailsForAvailableOnly"> Show Details for 'Available' only</label>
                    </div>

                    <hr class="options-separator">

                    <div class="checkbox-grid">
                        <!-- Debugging & Raw Data Tabs -->
                        <label><input type="checkbox" name="showRawJsonTab"> Show Raw Campsites Tab</label>
                        <label><input type="checkbox" name="showFullMetadataTab"> Show Raw Metadata Tab</label>
                        <label><input type="checkbox" name="showRecGovSearchDataTab"> Show Raw Rec.gov Search Tab</label>
                        <label><input type="checkbox" name="showDebugTab"> Show Debug Tab</label>
                        <label><input type="checkbox" id="openDebugTabInNewWindow" name="openDebugTabInNewWindow"> Open Debug in New Window</label>
                    </div>
                </fieldset>
        
                <!-- Action Buttons -->
                <div class="button-container">
                    <button type="submit">Run Availability Check</button>
                    <button type="button" id="copy-link-button">Copy Sharable Link</button>
                </div>
            </form>
        </div>
    </div>

    <hr>

    <!-- Container for the new in-page tab system -->
    <div id="results-tabs-container" style="display: none;">
        <div id="tab-buttons" class="tab-buttons"></div>
        <div id="tab-panels" class="tab-panels"></div>
    </div>

    <!-- <div id="live-debug-panel" style="display: none;">
        <h3>Live Debug Panel</h3>
    </div> -->

    <script type="module" src="campgroundAvailability.js"></script>

    <!-- Back to Top Button -->
    <button id="back-to-top-btn" title="Go to top">&uarr;</button>
</body>
</html>
